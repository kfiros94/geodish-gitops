# MongoDB Community Operator values

community-operator:
  operator:
    name: mongodb-kubernetes-operator
    namespace: devops-app

# MongoDB instance configuration
mongodb:
  name: geodish-mongodb
  scramCredentialsSecretName: geodish-mongodb-scram
  spec:
    members: 1
    type: ReplicaSet
    version: "6.0.5"
    
    security:
      authentication:
        modes: ["SCRAM"]
    
    users:
      - name: geodish-user
        db: admin
        passwordSecretRef:
          name: mongodb-secret
        scramCredentialsSecretName: geodish-mongodb-scram
        roles:
          - name: clusterAdmin
            db: admin
          - name: userAdminAnyDatabase
            db: admin
          - name: readWriteAnyDatabase
            db: admin
    
    additionalMongodConfig:
      storage.wiredTiger.engineConfig.journalCompressor: zlib
    
    # Persistent storage configuration using EBS CSI driver
    statefulSet:
      spec:
        template:
          spec:
            containers:
              - name: mongod
                resources:
                  limits:
                    cpu: 500m
                    memory: 512Mi
                  requests:
                    cpu: 250m
                    memory: 256Mi
        # Persistent volume claim template for data persistence
        volumeClaimTemplates:
          - metadata:
              name: data-volume
            spec:
              accessModes: ["ReadWriteOnce"]
              storageClassName: "ebs-mongodb"
              resources:
                requests:
                  storage: 20Gi